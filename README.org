
#+STARTUP: showall

* Talk to i3 from a Chrome Extension

[[http://developer.chrome.com/extensions/nativeMessaging]]

[[http://i3wm.org/docs/ipc.html]]

** Installing

First, in [[chrome://extensions]] "load unpacked extension" from this
directory. This will assign an ID, which needs to get put into the
NativeMessagingHosts manifest. The [[file:Install]] script knows how
to read the browser preferences to find the ID, and writes an
appropriately configured manifest.

** Playing Around

"Inspect views" and open the console in the background page. Then:

- ~i3.open()~ :: start up the relay
- ~i3.ask( x )~ :: send a message
  |         x | meaning                     |
  |-----------+-----------------------------|
  | "command" | COMMAND                     |
  |         1 | GET_WORKSPACES              |
  | ["a","b"] | SUBSCRIBE (not implemented) |
  |         3 | GET_OUTPUTS                 |
  |         4 | GET_TREE                    |
  |         5 | GET_MARKS                   |
  |         6 | GET_BAR_CONFIG              |
  |         7 | GET_VERSION                 |
- ~i3.close()~ :: shut it down

** Legal Stuff

#+BEGIN_EXAMPLE
Copyright Â© 2015, Jeremy Heiner (github.com/JHeiner).
All rights reserved. See LICENSE file.
#+END_EXAMPLE

# Local Variables:
# eval: (auto-fill-mode);
# End:
